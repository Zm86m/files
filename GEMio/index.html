<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Client</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('data:image/jpeg;base64,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');
            background-size: 100%;
        }
        #error-message {
            color: red;
            font-size: 2em; /* Large text */
            position: fixed; /* Fixed positioning */
            top: 50%; /* Center vertically */
            left: 50%; /* Center horizontally */
            transform: translate(-50%, -50%); /* Adjust for centering */
            z-index: 10; /* Ensure it's above other elements */
            backdrop-filter: blur(5px); /* Blur effect */
            display: none; /* Hidden by default */
        }
        #content {
            filter: blur(0); /* No blur effect initially */
        }
    </style>
    <script>
        const SERVER_URL = 'https://verbose-garbanzo-pj79v5j74jqpc975r-3000.app.github.dev';

        async function sendMessage() {
            const name = document.getElementById('name').value;
            const message = document.getElementById('message').value;

            const response = await fetch(`${SERVER_URL}/p1`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ name, message }),
            });

            const result = await response.json();
            console.log(result);
            document.getElementById('name').value = '';
            document.getElementById('message').value = '';
            fetchMessages(); // Optionally fetch messages after sending
        }

        async function fetchMessages() {
            try {
                const response = await fetch(`${SERVER_URL}/g1`);
                const messagesList = document.getElementById('messages');
                const errorMessage = document.getElementById('error-message');
                const content = document.getElementById('content');

                // Clear previous error message
                errorMessage.style.display = 'none';
                content.style.filter = 'blur(0)'; // Clear blur

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const messages = await response.json();
                messagesList.innerHTML = ''; // Clear the existing list

                messages.forEach(msg => {
                    const li = document.createElement('li');
                    li.textContent = `${msg.name}: ${msg.mess}`;
                    messagesList.appendChild(li);
                });
            } catch (error) {
                console.error('Fetch error:', error);
                const errorMessage = document.getElementById('error-message');
                const content = document.getElementById('content');

                errorMessage.style.display = 'block'; // Show error message
                content.style.filter = 'blur(5px)'; // Apply blur effect to content
            }
        }

        // Fetch messages every 2 seconds
        setInterval(fetchMessages, 2000);
    </script>
</head>
<body>
    <div id="content">
        <h1>Message Client</h1>
        <input type="text" id="name" placeholder="Your Name" required>
        <input type="text" id="message" placeholder="Your Message" required>
        <button onclick="sendMessage()">Send Message</button>

        <h2>Messages</h2>
        <ul id="messages"></ul>
    </div>
    <div id="error-message">No Server Available</div> <!-- Error message div -->

    <script>
        // Initial fetch on page load
        fetchMessages();
    </script> 
</body>
</html>